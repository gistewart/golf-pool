<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Images</title>
</head>

<body>

    <% let arr = [
    {
      "poolsterId": 1,
      "name": "Alan Schneider",
      "handle": "The Trader",
      "image": "https://pga-tour-res.cloudinary.com/image/upload/c_fill,d_headshots_default.png,f_auto,g_face:center,h_294,q_auto,w_220/headshots_01810.png"
    },
    {
      "poolsterId": 2,
      "name": "Ashley Marsay",
      "handle": "Flash Ash",
      "image": "https://pga-tour-res.cloudinary.com/image/upload/c_fill,d_headshots_default.png,f_auto,g_face:center,h_294,q_auto,w_220/headshots_01810.png"
    },
    {
      "poolsterId": 3,
      "name": "Barton Cottle",
      "handle": "The Bic",
      "image": "https://pga-tour-res.cloudinary.com/image/upload/c_fill,d_headshots_default.png,f_auto,g_face:center,h_294,q_auto,w_220/headshots_01810.png"
    },
    {
      "poolsterId": 4,
      "name": "Blake Cottle",
      "handle": "The Snake",
      "image": "https://pga-tour-res.cloudinary.com/image/upload/c_fill,d_headshots_default.png,f_auto,g_face:center,h_294,q_auto,w_220/headshots_01810.png"
    },
    {
      "poolsterId": 5,
      "name": "Darrel Zander",
      "handle": "The Chief",
      "image": "https://pga-tour-res.cloudinary.com/image/upload/c_fill,d_headshots_default.png,f_auto,g_face:center,h_294,q_auto,w_220/headshots_01810.png"
    },
    {
      "poolsterId": 6,
      "name": "Graeme Stewart",
      "handle": "Braveheart",
      "image": "public/images/myImage-1591146665495.jpg"
    },
    {
      "poolsterId": 7,
      "name": "James Holcomb",
      "handle": "Southern Boy",
      "image": "https://pga-tour-res.cloudinary.com/image/upload/c_fill,d_headshots_default.png,f_auto,g_face:center,h_294,q_auto,w_220/headshots_01810.png"
    },
    {
      "poolsterId": 8,
      "name": "Jerry Yang",
      "handle": "Treehugger",
      "image": "https://pga-tour-res.cloudinary.com/image/upload/c_fill,d_headshots_default.png,f_auto,g_face:center,h_294,q_auto,w_220/headshots_01810.png"
    },
    {
      "poolsterId": 9,
      "name": "John Reeves",
      "handle": "The Canary",
      "image": "https://pga-tour-res.cloudinary.com/image/upload/c_fill,d_headshots_default.png,f_auto,g_face:center,h_294,q_auto,w_220/headshots_01810.png"
    },
    {
      "poolsterId": 10,
      "name": "Josh Zander",
      "handle": "ZED",
      "image": "https://pga-tour-res.cloudinary.com/image/upload/c_fill,d_headshots_default.png,f_auto,g_face:center,h_294,q_auto,w_220/headshots_01810.png"
    },
    {
      "poolsterId": 11,
      "name": "Lynn Odland",
      "handle": "Big Dog + JP",
      "image": "https://pga-tour-res.cloudinary.com/image/upload/c_fill,d_headshots_default.png,f_auto,g_face:center,h_294,q_auto,w_220/headshots_01810.png"
    },
    {
      "poolsterId": 12,
      "name": "Paul Odland",
      "handle": "Banger",
      "image": "https://pga-tour-res.cloudinary.com/image/upload/c_fill,d_headshots_default.png,f_auto,g_face:center,h_294,q_auto,w_220/headshots_01810.png"
    },
    {
      "poolsterId": 13,
      "name": "Roger Silver",
      "handle": "The Brit",
      "image": "https://pga-tour-res.cloudinary.com/image/upload/c_fill,d_headshots_default.png,f_auto,g_face:center,h_294,q_auto,w_220/headshots_01810.png"
    },
    {
      "poolsterId": 14,
      "name": "Ruben Possin",
      "handle": "The Sage",
      "image": "https://pga-tour-res.cloudinary.com/image/upload/c_fill,d_headshots_default.png,f_auto,g_face:center,h_294,q_auto,w_220/headshots_01810.png"
    },
    {
      "poolsterId": 15,
      "name": "Russ Cottle",
      "handle": "Scarlet Pimpernel",
      "image": "https://pga-tour-res.cloudinary.com/image/upload/c_fill,d_headshots_default.png,f_auto,g_face:center,h_294,q_auto,w_220/headshots_01810.png"
    },
    {
      "poolsterId": 16,
      "name": "Tony Hahn",
      "handle": "Money Guru",
      "image": "https://pga-tour-res.cloudinary.com/image/upload/c_fill,d_headshots_default.png,f_auto,g_face:center,h_294,q_auto,w_220/headshots_01810.png"
    },
    {
      "poolsterId": 17,
      "name": "Vik Kabra",
      "handle": "Jayhawk",
      "image": "https://pga-tour-res.cloudinary.com/image/upload/c_fill,d_headshots_default.png,f_auto,g_face:center,h_294,q_auto,w_220/headshots_01810.png"
    },
    {
      "poolsterId": 18,
      "name": "Wayne Bellows",
      "handle": "El Caballito",
      "image": "https://pga-tour-res.cloudinary.com/image/upload/c_fill,d_headshots_default.png,f_auto,g_face:center,h_294,q_auto,w_220/headshots_01810.png"
    }
  ] 
  %>
    <%
  const sortedArr = arr.sort((a,b) => a.handle.localeCompare(b.handle));
  console.log(sortedArr);
    %>

    <div class="container">
        <h4 id="submitMessage">Profile Image Upload</h1>
            <%= typeof msg != 'undefined' ? msg : '' %>

            <div class="row">
                <form action="/upload" method="POST" enctype="multipart/form-data">
                    <div class="input-field col s12">
                        <select>
                            <option value="" disabled selected>Poolster name </option>

                            <%for (let i = 0; i < sortedArr.length; i++) { %>
                            <option value="<%=sortedArr[i].poolsterId%>"><%=sortedArr[i].handle%></option>
                            <%}%>

                        </select>
                    </div>
                    <div class="file-field input-field">
                        <div class="btn grey">
                            <span>Image</span>
                            <input name="myImage" type="file">
                        </div>
                        <div class="file-path-wrapper">
                            <input class="file-path validate" type="text">
                        </div>
                    </div>
                    <button type="submit" class="btn">Submit</button>
                </form>
            </div>

            <br>
            <img src="<%= typeof file != 'undefined' ? file : '' %>" class="responsive-img">
                    </div>


                    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
                        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
                        crossorigin="anonymous"></script>
                    <script
                        src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
</body>
<script>
    $("select").formSelect();
    $(".imgMessage").html("");

    // $.get("api/poolsters", function (result) {
    //     console.log(result)
    // })
</script>

</html>